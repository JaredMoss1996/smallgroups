<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- Group Card Fragment -->
    <div th:fragment="group-card(group, showJoinButton)" class="group-card">
        <div th:if="${group.imageUrl}" class="mb-3">
            <img th:src="${group.imageUrl}" th:alt="${group.name}" class="img-fluid rounded" style="max-height: 200px; width: 100%; object-fit: cover;">
        </div>
        <div class="d-flex justify-content-between align-items-start">
            <div>
                <h4 class="mb-2" th:text="${group.name}">Group Name</h4>
                <h6 class="text-muted mb-3" th:text="${group.churchName}">Church Name</h6>
            </div>
            <div>
                <span th:if="${group.childcareIncluded}" class="badge bg-success badge-custom">Childcare</span>
                <span th:if="${group.handicapAccessible}" class="badge bg-info badge-custom">Accessible</span>
            </div>
        </div>
        
        <p class="mb-3" th:text="${group.description} ?: 'No description available.'">Description</p>
        
        <div class="row mb-3">
            <div class="col-md-6">
                <strong>Location:</strong> <span th:text="${group.location}">Location</span>
                <br th:if="${group.address}">
                <small th:if="${group.address}" th:text="${group.address}">Address</small>
            </div>
            <div class="col-md-6">
                <span th:if="${group.denomination}">
                    <strong>Denomination:</strong> <span th:text="${group.denomination}">Denomination</span><br>
                </span>
                <span th:if="${group.meetingDay}">
                    <strong>Meeting:</strong> <span th:text="${group.meetingDay}">Day</span>
                    <span th:if="${group.meetingTime}" th:text="' at ' + ${group.meetingTime}">Time</span>
                </span>
            </div>
        </div>
        
        <div class="d-flex flex-wrap gap-2 mb-3">
            <span th:if="${group.ageGroup}" class="badge bg-primary" th:text="${group.ageGroup}">Age Group</span>
            <span th:if="${group.gender}" class="badge bg-secondary" th:text="${group.gender}">Gender</span>
            <span th:if="${group.type}" class="badge bg-dark" th:text="${group.type}">Type</span>
        </div>
        
        <div th:if="${group.contactName or group.contactEmail or group.contactPhone}" class="mt-3 pt-3 border-top">
            <strong>Contact:</strong>
            <span th:if="${group.contactName}" th:text="${group.contactName}">Contact Name</span>
            <br th:if="${group.contactEmail}">
            <span th:if="${group.contactEmail}">
                Email: <a th:href="'mailto:' + ${group.contactEmail}" th:text="${group.contactEmail}">Email</a>
            </span>
            <br th:if="${group.contactPhone}">
            <span th:if="${group.contactPhone}">
                Phone: <span th:text="${group.contactPhone}">Phone</span>
            </span>
        </div>
        
        <div th:if="${group.currentSize and group.maxSize}" class="mt-2">
            <small class="text-muted">
                Group Size: <span th:text="${group.currentSize}">0</span> / <span th:text="${group.maxSize}">0</span>
            </small>
        </div>
        
        <div class="mt-3" th:if="${showJoinButton}">
            <button th:if="${!group.isMember}" 
                    class="btn btn-primary btn-sm" 
                    hx-post="@{/groups/{id}/join(id=${group.id})}"
                    hx-swap="outerHTML"
                    hx-target="closest .group-card">
                Join Group
            </button>
            <button th:if="${group.isMember}" 
                    class="btn btn-secondary btn-sm" 
                    hx-post="@{/groups/{id}/leave(id=${group.id})}"
                    hx-swap="outerHTML"
                    hx-target="closest .group-card">
                Leave Group
            </button>
        </div>
    </div>
</body>
</html>
